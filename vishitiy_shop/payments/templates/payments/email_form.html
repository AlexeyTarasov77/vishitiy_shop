{% extends "base.html" %}
{% load static %} {% load crispy_forms_tags %}

{% block links %}

    <link rel="stylesheet" href="{% static 'payments/css/payment.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
{% endblock links %}



{% block content %}
<style>
    #div_id_city, #div_id_post_office {
        /*the container must be positioned relative:*/
        position: relative;
      }
      .autocomplete-items {
        position: absolute;
        border: 1px solid #d4d4d4;
        border-bottom: none;
        border-top: none;
        z-index: 99;
        /*position the autocomplete items to be the same width as the container:*/
        top: 100%;
        left: 0;
        right: 0;
      }
      .autocomplete-items div {
        padding: 10px;
        cursor: pointer;
        background-color: #fff;
        color: #000;
        border-bottom: 1px solid #d4d4d4;
      }
      .autocomplete-items div:hover {
        /*when hovering an item:*/
        background-color: #e9e9e9;
      }
      .autocomplete-active {
        /*when navigating through the items using the arrow keys:*/
        background-color: DodgerBlue !important;
        color: #ffffff;
      }
</style>

<div class="wrapper">
    <div class="fixed w-full h-full top-0 left-0 flex items-center content-center justify-center overflow-auto">
        <div class="spinner-border text-danger htmx-indicator" role="status" id="indicator">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
    <form method="POST">
        {% csrf_token %}
        <div class="flex items-center justify-content-center text-white flex-column" style="height: 100vh">
            <div>
                <h1 class="text-center">Заповни данні</h1>
                {% for f in form %}
                <div class="mb-3 autocomplete" id="div_id_{{f.name}}">
                    {% if f.field.required %}
                    <label for="{{f.id_for_label}}" class="form-label requiredField">
                        {{f.label}}
                        <span class="asteriskField">*</span>
                    </label>
                    {% else %}
                    <label for="{{f.id_for_label}}" class="form-label">
                        {{f.label}}
                    </label>
                    {% endif %}
                    {{f}}
                </div>
                {% endfor %}
                <button type="submit" class="btn btn-light col-sm-12" style="width: 200px;">Оформити</button>
            </div>
        </div>    
    </form>
    <div class="cities-res"></div>
    <div class="post-offices-res"></div>
</div>
{% endblock content %}



{% block js %}
<script src="https://unpkg.com/htmx.org@2.0.0"></script>
<script src="{% static "payments/js/autocomplete.js" %}"></script>
{% endblock js %}